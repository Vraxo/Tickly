<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewModels="clr-namespace:Tickly.ViewModels"
             xmlns:microcharts="clr-namespace:Microcharts.Maui;assembly=Microcharts.Maui"
             x:Class="Tickly.Views.ProgressPage"
             Title="Progress Report">

    <ScrollView>
        <VerticalStackLayout Spacing="20" Padding="20">

            <Label Text="Progress Data" FontSize="Large" FontAttributes="Bold" HorizontalOptions="Center" />

            <!-- Section for Exporting Progress -->
            <Frame Padding="10" CornerRadius="5" BorderColor="LightGray">
                <VerticalStackLayout Spacing="10">
                    <Label Text="Export Progress Data" FontSize="Medium" FontAttributes="Bold" />

                    <Grid ColumnDefinitions="Auto,*" RowDefinitions="Auto,Auto" ColumnSpacing="10" RowSpacing="5">
                        <Label Text="Sort Order:" VerticalOptions="Center" Grid.Row="0" Grid.Column="0"/>
                        <Picker ItemsSource="{Binding ExportSortOrders}"
                                SelectedItem="{Binding SelectedExportSortOrder}"
                                Grid.Row="0" Grid.Column="1"/>

                        <Label Text="Calendar Type:" VerticalOptions="Center" Grid.Row="1" Grid.Column="0"/>
                        <Picker ItemsSource="{Binding ExportCalendarTypes}"
                                SelectedItem="{Binding SelectedExportCalendarType}"
                                Grid.Row="1" Grid.Column="1"/>
                    </Grid>

                    <Button Text="Export Progress"
                            Command="{Binding ExportProgressCommand}"
                            HorizontalOptions="FillAndExpand" />
                </VerticalStackLayout>
            </Frame>

            <!-- Progress Plot -->
            <Frame Padding="10" CornerRadius="5" BorderColor="LightGray" Margin="0,20,0,0">
                <VerticalStackLayout Spacing="10">
                    <Label Text="Progress Over Time" FontSize="Medium" FontAttributes="Bold" />
                    <microcharts:ChartView Chart="{Binding ProgressChart}"
                                           HeightRequest="300"
                                           HorizontalOptions="FillAndExpand" />
                </VerticalStackLayout>
            </Frame>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
